# Stock Research Tool Configuration
# This file contains application settings that can be version controlled

# =============================================================================
# Data Sources Configuration
# =============================================================================
data_sources:
  alpha_vantage:
    base_url: "https://www.alphavantage.co/query"
    rate_limit: 30  # requests per minute
    timeout: 10  # seconds
    retry_attempts: 3

  sec_edgar:
    base_url: "https://www.sec.gov/cgi-bin/browse-edgar"
    filings_url: "https://data.sec.gov"
    rate_limit: 10  # requests per second
    timeout: 15
    retry_attempts: 3

  yahoo_finance:
    enabled: true
    timeout: 10
    retry_attempts: 3

  financial_modeling_prep:
    base_url: "https://financialmodelingprep.com/api/v3"
    rate_limit: 250  # requests per day for free tier
    timeout: 10

# =============================================================================
# Fund Tracking Configuration
# =============================================================================
funds:
  # Tech-focused funds (10 funds) - Investment managers known for tech holdings
  tech_focused:
    - name: "ARK Investment Management"
      ticker: ""
      cik: "0001697748"
      priority: 1

    - name: "Coatue Management"
      ticker: ""
      cik: "0001535392"
      priority: 2

    - name: "Tiger Global Management"
      ticker: ""
      cik: "0001167483"
      priority: 3

    - name: "Dragoneer Investment Group"
      ticker: ""
      cik: "0001699197"
      priority: 4

    - name: "Altimeter Capital Management"
      ticker: ""
      cik: "0001649339"
      priority: 5

    - name: "Lone Pine Capital"
      ticker: ""
      cik: "0000934791"
      priority: 6

    - name: "Viking Global Investors"
      ticker: ""
      cik: "0001103804"
      priority: 7

    - name: "Whale Rock Capital Management"
      ticker: ""
      cik: "0001530301"
      priority: 8

    - name: "Light Street Capital"
      ticker: ""
      cik: "0001569391"
      priority: 9

    - name: "Durable Capital Partners"
      ticker: ""
      cik: "0001810090"
      priority: 10

  # General/diversified funds (10 funds) - Institutional managers that file 13F
  general:
    - name: "Berkshire Hathaway"
      ticker: ""
      cik: "0001067983"
      priority: 1

    - name: "Bridgewater Associates"
      ticker: ""
      cik: "0001350694"
      priority: 2

    - name: "Renaissance Technologies"
      ticker: ""
      cik: "0001037389"
      priority: 3

    - name: "Two Sigma Investments"
      ticker: ""
      cik: "0001179392"
      priority: 4

    - name: "Citadel Advisors"
      ticker: ""
      cik: "0001423053"
      priority: 5

    - name: "DE Shaw & Co"
      ticker: ""
      cik: "0001009207"
      priority: 6

    - name: "Millennium Management"
      ticker: ""
      cik: "0000892450"
      priority: 7

    - name: "Point72 Asset Management"
      ticker: ""
      cik: "0001603466"
      priority: 8

    - name: "Third Point LLC"
      ticker: ""
      cik: "0001040273"
      priority: 9

    - name: "Pershing Square Capital"
      ticker: ""
      cik: "0001336528"
      priority: 10

# =============================================================================
# Market Indices
# =============================================================================
market_indices:
  - name: "S&P 500"
    symbol: "^GSPC"

  - name: "Dow Jones Industrial Average"
    symbol: "^DJI"

  - name: "NASDAQ Composite"
    symbol: "^IXIC"

  - name: "Russell 2000"
    symbol: "^RUT"

# =============================================================================
# Analysis Configuration
# =============================================================================
analysis:
  # Confidence thresholds for recommendations
  confidence_thresholds:
    high: 0.8
    medium: 0.6
    low: 0.4

  # Technical analysis parameters
  technical:
    rsi_period: 14
    macd_fast: 12
    macd_slow: 26
    macd_signal: 9
    bollinger_period: 20
    bollinger_std: 2
    sma_periods: [20, 50, 200]

  # Valuation metrics thresholds
  valuation:
    pe_ratio:
      undervalued: 15
      fair: 25
      overvalued: 35
    peg_ratio:
      undervalued: 1.0
      fair: 1.5
      overvalued: 2.0
    debt_to_equity:
      low: 0.5
      moderate: 1.0
      high: 2.0

# =============================================================================
# AI/LLM Configuration
# =============================================================================
ai:
  ollama:
    model: "mistral:7b"
    temperature: 0.3
    max_tokens: 2048
    timeout: 120

  # Agent-specific settings
  agents:
    supervisor:
      max_iterations: 10
      timeout: 300

    market_sentiment:
      news_sources: 5
      history_days: 7

    stock_research:
      max_retries: 3
      fallback_enabled: true

    analysis_engine:
      peer_comparison_count: 5
      forecast_months: 6

# =============================================================================
# Data Collection Strategy
# =============================================================================
data_collection:
  # Progressive fallback pattern targets
  fallback_targets:
    direct_api: 0.90  # 90% target
    mcp_extraction: 0.08  # 8% target
    vision_analysis: 0.02  # 2% target

  # Cache settings
  cache:
    stock_prices_ttl: 300  # 5 minutes
    fundamentals_ttl: 3600  # 1 hour
    news_ttl: 900  # 15 minutes
    filings_ttl: 86400  # 24 hours

# =============================================================================
# Scheduling
# =============================================================================
scheduling:
  market_sentiment:
    schedule: "0 16 * * 1-5"  # 4 PM EST weekdays
    timezone: "America/New_York"

  fund_holdings:
    trigger: "sensor"  # Triggered by SEC filing detection
    check_interval: 3600  # Check every hour

  stock_prices:
    schedule: "*/5 16-20 * * 1-5"  # Every 5 min during market hours
    timezone: "America/New_York"

# =============================================================================
# Performance Settings
# =============================================================================
performance:
  max_concurrent_requests: 10
  request_timeout: 30
  batch_size: 50
  memory_limit_mb: 2048
  cache_hit_rate_target: 0.60

# =============================================================================
# Reporting
# =============================================================================
reporting:
  pdf:
    page_size: "A4"
    margin: "1in"
    include_charts: true
    executive_summary: true

  charts:
    default_height: 400
    default_width: 800
    theme: "plotly_white"

# ==============================================================================
# Web Scraping Configuration
# ==============================================================================
web_scraping:
  # Company profile description
  company_profile:
    url_pattern: "https://finance.yahoo.com/quote/{TICKER}/profile/"
    extraction_prompt: |
      Extract the company description from this webpage accessibility tree.

      Requirements:
      - Find the business description section (usually labeled "Description" or "Business Summary")
      - Extract ONLY the text describing what the company does and how they make money
      - Return the description as a JSON object with a "description" key
      - If multiple description sections exist, combine them coherently
      - If no description found, return {"description": ""}

      Return ONLY valid JSON in this format:
      {"description": "The company description text here..."}
    timeout: 30
    fallback_enabled: true

  # Market data from web scraping
  market_overview_perplexity:
    url_pattern: "https://www.marketwatch.com/"
    extraction_prompt: |
      Extract market overview information from this MarketWatch homepage.

      Requirements:
      - Extract the overall market sentiment from headlines and market data
      - Identify trending/hot sectors mentioned in articles
      - Identify declining/concerning sectors or stocks
      - Extract key market themes or narratives from top stories
      - Extract significant market events or news from headlines
      - Look for bullish/bearish language in headlines and summaries

      Return ONLY valid JSON in this exact format:
      {
        "market_summary": "Overall market description based on headlines and data...",
        "trending_sectors": ["sector1", "sector2", "sector3"],
        "declining_sectors": ["sector1", "sector2"],
        "market_themes": ["theme1", "theme2"],
        "key_events": ["event1", "event2"],
        "sentiment_indicators": {
          "positive_mentions": ["positive indicator1", "positive indicator2"],
          "negative_mentions": ["negative indicator1", "negative indicator2"]
        }
      }

      If information is not found, return empty arrays/strings.
      DO NOT make up information that is not present on the page.
    timeout: 60
    fallback_enabled: true

  # Future data types can be added here
  # Example:
  # executive_compensation:
  #   url_pattern: "https://finance.yahoo.com/quote/{TICKER}/compensation/"
  #   extraction_prompt: "Extract executive compensation data..."
  #   timeout: 30
  #   fallback_enabled: true
